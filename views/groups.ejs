<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Groups</title>
        <link rel="stylesheet" type="text/css" href="/site.css" />
    </head>
    <div class="center">
        <% for (const group of groups) { %>
        <table id="<%= group[1] %>">
            <tr ondragover="dragover(event)">
                <th colspan="2"><%= group[1] %> - <%= group[2] %></th>
            </tr>

            <% for (const studentGroup of studentGroups) { %> <% if (studentGroup[1]===group[1]) { %>

            <tr draggable="true" ondragstart="dragit(event)" ondragover="dragover(event)">
                <td><%= studentGroup[0] %></td>
            </tr>
            <% } %> <% } %>
        </table>
        <% } %>
    </div>
    <script>
        let shadow;
        function dragit(event) {
            shadow = event.target;
        }
        function dragover(e) {
            let children = Array.from(e.target.parentNode.parentNode.children);
            if (children.indexOf(e.target.parentNode) > children.indexOf(shadow)) e.target.parentNode.after(shadow);
            else e.target.parentNode.before(shadow);
        }
    </script>
</html>
